/**
 * Readabler
 * Web accessibility for Your WordPress site.
 * Exclusively on https://1.envato.market/readabler
 *
 * @encoding        UTF-8
 * @version         1.2.13
 * @copyright       (C) 2018 - 2022 Merkulove ( https://merkulov.design/ ). All rights reserved.
 * @license         Envato License https://1.envato.market/KYbje
 * @contributors    Nemirovskiy Vitaliy (nemirovskiyvitaliy@gmail.com), Dmitry Merkulov (dmitry@merkulov.design)
 * @support         help@merkulov.design
 * @license         Envato License https://1.envato.market/KYbje
 **/
!function(e){"use strict";e(document).ready((function(){if(e(".mdp-tab-name-open_button").length){let n=e("#mdp_readabler_open_button_settings-show_open_button");function t(){n.is(":checked")?n.closest("tr").nextAll("tr").show(300):n.closest("tr").nextAll("tr").hide(300)}n.on("change",t),t()}let n=e("#mdp-api-key-drop-zone");n.on("dragenter",(function(){d(),e(this).addClass("mdp-hover")})),n.on("dragleave",(function(){e(this).removeClass("mdp-hover")})),n.on("dragover",(function(e){e.stopPropagation(),e.preventDefault()}));let a=e("#mdp-readabler-settings-dnd-api-key");function l(t){let l=new FileReader;l.onload=function(t){let l=t.target.result;return function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(l)?void 0===JSON.parse(l).private_key?(o("Error: Your API key file looks like not valid. Please make sure you use the correct key."),void n.removeClass("mdp-busy")):(a.val(btoa(l)),d(),void(a.val().length>1e3?e("#submit").click():(o("Error: Your API key file looks like not valid. Please make sure you use the correct key."),n.removeClass("mdp-busy")))):(o("Error: Uploaded file is empty or not a valid JSON file."),void n.removeClass("mdp-busy"))},l.readAsText(t)}n.on("drop",(function(t){t.stopPropagation(),t.preventDefault(),e(this).removeClass("mdp-hover"),n.addClass("mdp-busy");let a=t.originalEvent.dataTransfer.files[0];r(a)?l(a):n.removeClass("mdp-busy")}));let s=e("#mdp-dnd-file-input");function o(e){n.next().addClass("mdp-error").html(e)}function d(){n.next().removeClass("mdp-error").html("")}function r(e){return null==e?(o("Error: Failed to read file. Please try again."),!1):!!e.type.match("application/json")||(o("Error: API Key must be a valid JSON file."),!1)}n.on("click",(function(){s.click()})),s.on("change",(function(e){n.addClass("mdp-busy");let t=e.target.files[0];r(t)?l(t):n.removeClass("mdp-busy")})),e(".mdp-reset-key-btn").on("click",(function(){a.val(""),e("#submit").trigger("click")}));let i=e("#mdp-readabler-settings-language-tbl");i.removeClass("hidden"),i.DataTable({lengthMenu:[[-1],["All"]],initComplete:function(){this.api().columns().every((function(){let t=this,n=e("#mdp-readabler-language-filter");0==t[0][0]&&n.on("change",(function(){e("#mdp-readabler-settings-language-tbl tbody").show(),e("#mdp-readabler-settings-language-tbl_info").show(),e("#mdp-readabler-settings-language-tbl_paginate").hide(),e("#mdp-readabler-settings-language-tbl_length").hide(),e("#mdp-readabler-settings-language-tbl thead").show();let n=e.fn.dataTable.util.escapeRegex(e(this).val());"0"===n&&(n=""),t.search(n?"^"+n+"$":"",!0,!1).draw()}))})),e("#mdp-readabler-settings-language-tbl tbody").hide(),e("#mdp-readabler-settings-language-tbl_info").hide(),e("#mdp-readabler-settings-language-tbl_paginate").hide(),e("#mdp-readabler-settings-language-tbl_length").hide(),e("#mdp-readabler-settings-language-tbl thead").hide()}}),e("#mdp-readabler-settings-language-tbl tbody").on("click","tr",(function(t){e("#mdp-readabler-settings-language-tbl tr.selected").removeClass("selected"),e(this).addClass("selected");let n=e("#mdp-readabler-settings-language-tbl tr.selected .mdp-voice-name").attr("title"),a=e("#mdp-readabler-settings-language-tbl tr.selected .mdp-lang-code").text();e(".mdp-now-used strong").html(n),e("#mdp-readabler-settings-language").val(n),e("#mdp-readabler-settings-language-code").val(a);let l=e(".mdp-now-used audio");e(".mdp-now-used audio source:nth-child(1)").attr("src","https://cloud.google.com/text-to-speech/docs/audio/"+n+".mp3"),e(".mdp-now-used audio source:nth-child(2)").attr("src","https://cloud.google.com/text-to-speech/docs/audio/"+n+".wav"),l[0].pause(),l[0].load()}));let c=e("#mdp-readabler-language-filter").parent().data("mdc-index");i.DataTable().rows().every((function(t,n,a){let l=this.data();l[1].includes(e("#mdp-readabler-settings-language").val())&&(window.MerkulovMaterial[c].value=l[0])}));let h=e("#mdp_readabler_open_button_settings_show_open_button");function u(){!0===h.prop("checked")?h.closest("tr").next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300).next().show(300):h.closest("tr").next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300).next().hide(300)}h.length&&(h.on("click",u),u());let p=e("#mdp_readabler_modal_popup_settings_popup_overlay");function g(){!0===p.prop("checked")?p.closest("tr").next().show(300):p.closest("tr").next().hide(300)}p.on("click",g),g();let m=e("#mdp_readabler_accessibility_statement_settings_statement_type");function b(){const t=e("#mdp_readabler_accessibility_statement_settings_statement_link");let n=200;"undefined"===window.statementType&&(n=0),window.statementType=!0,"hide"===m.val()&&m.closest("tr").nextAll("tr").hide(100),"link"===m.val()&&(t.closest("tr").nextAll("tr").hide(100),t.closest("tr").show(400)),"inline"===m.val()&&(t.closest("tr").hide(100),t.closest("tr").nextAll("tr").show(400))}m.on("change",b),b()}))}(jQuery);